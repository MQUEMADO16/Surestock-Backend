# --- Load the .env file ---
spring.config.import=optional:file:.env[.properties]

# --- Database Setup ---
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}

# --- Supabase / Postgres Driver Settings ---
spring.datasource.driver-class-name=org.postgresql.Driver

# --- HikariCP Tuning (Fix for "Connection has been closed") ---
# Retires connections after 10 mins (must be < DB timeout)
spring.datasource.hikari.max-lifetime=600000
# Pings the DB every 45 seconds to keep the connection "hot"
spring.datasource.hikari.keepalive-time=45000
# Gives up if validation takes > 5 seconds
spring.datasource.hikari.validation-timeout=5000
# Optional: Keeps 2 connections ready to go
spring.datasource.hikari.minimum-idle=2

# --- Hibernate Settings ---
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
# Fix for "Open Session in View" warning (Recommended to disable for API performance)
spring.jpa.open-in-view=false

# --- Server Port ---
server.port=8080